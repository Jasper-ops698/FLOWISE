import{u as M,a as z,r as a,b as $,c as H,j as e,M as q,S as y,B as m,g as L}from"./index-D8qwh8Rn.js";import{I as J}from"./ItemCard-D36hJ1j9.js";import{L as U}from"./LoginDialog-Cqvfv_qX.js";import{C as X}from"./ConfirmDialog-Cyawl5lr.js";import{F as Y}from"./FlowListTable-vjVvgPEt.js";import{T as D,S as _}from"./StyledButton-TDHY8VJ7.js";import{V as K}from"./ViewHeader-oD-Bx0zB.js";import{E as Q}from"./ErrorBoundary-CjxobI3H.js";import{c as W}from"./chatflows-DykhAkU3.js";import{T as Z,I as tt,a as et}from"./IconList-BzZSR7oW.js";import{I as ot,S as p}from"./IconPlus-BBI6Xdu5.js";import"./Grid-BCP97PEw.js";import"./Input-CQiAkORa.js";import"./FormControl-BssRzYmG.js";import"./OutlinedInput-By313Irr.js";import"./Popover-9rip021K.js";import"./KeyboardArrowDown-B3kncsLf.js";import"./Delete-x860-63w.js";import"./SaveChatflowDialog-AxAshkX3.js";import"./TextField-DU_fFDpA.js";import"./IconSearch-B-aURSlv.js";import"./Menu-CE9HmQop.js";import"./SpeechToText-Db3Wx51_.js";import"./IconBulb-DLprwU7z.js";import"./TooltipWithParser-DupkeXln.js";import"./IconTrash-B8PfqMYh.js";import"./CredentialListDialog-fFHH2xhg.js";import"./Dropdown-9eBqPPQq.js";import"./main-CI6DClwd.js";import"./CredentialInputHandler-CXZSmZ79.js";import"./CircularProgress-CWGeFlRw.js";import"./ExportAsTemplateDialog-D8Xmyz_E.js";import"./StyledFab-CWZ3rRfY.js";import"./IconArrowLeft-Dz4QikgT.js";import"./IconCopy-m573cXYn.js";const rt="/assets/agents_empty-CPmzgTXa.svg",Mt=()=>{var j,w,S;const n=M(),s=z(),[l,A]=a.useState(!0),[u,f]=a.useState(null),[h,I]=a.useState({}),[c,E]=a.useState(""),[b,T]=a.useState(!1),[k,B]=a.useState({}),o=$(W.getAllAgentflows),[d,F]=a.useState(localStorage.getItem("flowDisplayStyle")||"card"),N=(t,r)=>{r!==null&&(localStorage.setItem("flowDisplayStyle",r),F(r))},O=t=>{E(t.target.value)};function x(t){return t.name.toLowerCase().indexOf(c.toLowerCase())>-1||t.category&&t.category.toLowerCase().indexOf(c.toLowerCase())>-1||t.id.toLowerCase().indexOf(c.toLowerCase())>-1}const P=(t,r)=>{localStorage.setItem("username",t),localStorage.setItem("password",r),n(0)},R=()=>{n("/agentcanvas")},V=t=>{n(`/agentcanvas/${t.id}`)};return a.useEffect(()=>{o.request()},[]),a.useEffect(()=>{var t,r;o.error&&(((r=(t=o.error)==null?void 0:t.response)==null?void 0:r.status)===401?(B({title:"Login",confirmButtonName:"Login"}),T(!0)):f(o.error))},[o.error]),a.useEffect(()=>{A(o.loading)},[o.loading]),a.useEffect(()=>{if(o.data)try{const t=o.data,r={};for(let i=0;i<t.length;i+=1){const G=t[i].flowData,C=JSON.parse(G).nodes||[];r[t[i].id]=[];for(let g=0;g<C.length;g+=1){const v=`${H}/api/v1/node-icon/${C[g].data.name}`;r[t[i].id].includes(v)||r[t[i].id].push(v)}}I(r)}catch(t){console.error(t)}},[o.data]),e.jsxs(q,{children:[u?e.jsx(Q,{error:u}):e.jsxs(y,{flexDirection:"column",sx:{gap:3},children:[e.jsxs(K,{onSearchChange:O,search:!0,searchPlaceholder:"Search Name or Category",title:"Agents",children:[e.jsxs(Z,{sx:{borderRadius:2,maxHeight:40},value:d,color:"primary",exclusive:!0,onChange:N,children:[e.jsx(D,{sx:{borderColor:s.palette.grey[900]+25,borderRadius:2,color:(j=s==null?void 0:s.customization)!=null&&j.isDarkMode?"white":"inherit"},variant:"contained",value:"card",title:"Card View",children:e.jsx(tt,{})}),e.jsx(D,{sx:{borderColor:s.palette.grey[900]+25,borderRadius:2,color:(w=s==null?void 0:s.customization)!=null&&w.isDarkMode?"white":"inherit"},variant:"contained",value:"list",title:"List View",children:e.jsx(et,{})})]}),e.jsx(_,{variant:"contained",onClick:R,startIcon:e.jsx(ot,{}),sx:{borderRadius:2,height:40},children:"Add New"})]}),!d||d==="card"?e.jsx(e.Fragment,{children:l&&!o.data?e.jsxs(m,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:L,children:[e.jsx(p,{variant:"rounded",height:160}),e.jsx(p,{variant:"rounded",height:160}),e.jsx(p,{variant:"rounded",height:160})]}):e.jsx(m,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:L,children:(S=o.data)==null?void 0:S.filter(x).map((t,r)=>e.jsx(J,{onClick:()=>V(t),data:t,images:h[t.id]},r))})}):e.jsx(Y,{isAgentCanvas:!0,data:o.data,images:h,isLoading:l,filterFunction:x,updateFlowsApi:o,setError:f}),!l&&(!o.data||o.data.length===0)&&e.jsxs(y,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[e.jsx(m,{sx:{p:2,height:"auto"},children:e.jsx("img",{style:{objectFit:"cover",height:"12vh",width:"auto"},src:rt,alt:"AgentsEmptySVG"})}),e.jsx("div",{children:"No Agents Yet"})]})]}),e.jsx(U,{show:b,dialogProps:k,onConfirm:P}),e.jsx(X,{})]})};export{Mt as default};
